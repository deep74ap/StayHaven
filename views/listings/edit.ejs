<% layout("/layouts/boilerplate") %>
<link rel="stylesheet" href="/css/listing-form.css">
<div class="listing-form-bg">
  <div class="listing-form-card">
    <h2>Edit Your Own Listing</h2>
    <form method="POST" action="/listings/<%= listing._id %>?_method=PUT" novalidate class="needs-validation" enctype="multipart/form-data">
      <div class="listing-form-section">
        <div class="listing-form-floating">
          <input type="text" id="title" name="listing[title]" placeholder=" " required value="<%= listing.title %>">
          <label for="title">Title</label>
          <div class="invalid-feedback">Please enter a title to continue.</div>
        </div>
        <div class="listing-form-floating">
          <textarea id="desc" name="listing[description]" placeholder=" " required rows="3"><%= listing.description %></textarea>
          <label for="desc">Description</label>
          <div class="invalid-feedback">Please enter a description to continue.</div>
        </div>
        <div class="listing-form-floating">
          <input type="file" id="url" name="listing[image]" placeholder=" ">
          <label for="url">Upload image</label>
          <!-- Optional: Only required for new listings -->
        </div>
      </div>
      <div class="listing-form-section" style="display: flex; gap: 1rem; flex-wrap: wrap;">
        <div class="listing-form-floating" style="flex:1; min-width:120px;">
          <input type="number" id="priceL" name="listing[price]" placeholder=" " required value="<%= listing.price %>">
          <label for="priceL">Price</label>
          <div class="invalid-feedback">Please enter a price to continue.</div>
        </div>
        <div class="listing-form-floating" style="flex:2; min-width:120px;">
          <input type="text" id="cnty" name="listing[country]" placeholder=" " required value="<%= listing.country %>">
          <label for="cnty">Country</label>
          <div class="invalid-feedback">Please enter a country to continue.</div>
        </div>
      </div>
      <div class="listing-form-section">
        <div class="listing-form-floating">
          <input type="text" id="lcn" name="listing[location]" placeholder=" " required value="<%= listing.location %>">
          <label for="lcn">Location</label>
          <div class="invalid-feedback">Please enter a location to continue.</div>
        </div>
      </div>
      <button type="submit" class="listing-form-btn">Update Listing</button>
    </form>
  </div>
</div>